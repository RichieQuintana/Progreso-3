{
  "info": {
    "name": "IntegraHub Collection",
    "_postman_id": "integrahub-collection",
    "description": "Postman collection para pruebas: token, orders (happy + error cases)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Get Token - client_credentials (write scope)",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/x-www-form-urlencoded" }
        ],
        "body": {
          "mode": "urlencoded",
          "urlencoded": [
            { "key": "grant_type", "value": "client_credentials" },
            { "key": "client_id", "value": "integra-client" },
            { "key": "client_secret", "value": "secret123" }
          ]
        },
        "url": { "raw": "http://localhost:4000/token", "protocol": "http", "host": ["localhost"], "port": "4000", "path": ["token"] }
      },
      "response": []
    },
    {
      "name": "Create Order - Happy Path",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" },
          { "key": "Authorization", "value": "Bearer {{access_token}}" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{ \"id\": \"test-1\", \"customer_name\": \"Postman User\", \"total_amount\": 100 }"
        },
        "url": { "raw": "http://localhost:9000/orders", "protocol": "http", "host": ["localhost"], "port": "9000", "path": ["orders"] }
      },
      "response": []
    },
    {
      "name": "Create Order - Invalid Token",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" },
          { "key": "Authorization", "value": "Bearer invalidtoken" }
        ],
        "body": { "mode": "raw", "raw": "{ \"id\": \"test-2\", \"customer_name\": \"Postman User\", \"total_amount\": 100 }" },
        "url": { "raw": "http://localhost:9000/orders", "protocol": "http", "host": ["localhost"], "port": "9000", "path": ["orders"] }
      },
      "response": []
    },
    {
      "name": "Get Token - read-only scope",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "application/x-www-form-urlencoded" } ],
        "body": { "mode": "urlencoded", "urlencoded": [ { "key": "grant_type", "value": "client_credentials" }, { "key": "client_id", "value": "read-only-client" }, { "key": "client_secret", "value": "secret-read" }, { "key": "scope", "value": "orders:read" } ] },
        "url": { "raw": "http://localhost:4000/token", "protocol": "http", "host": ["localhost"], "port": "4000", "path": ["token"] }
      }
    },
    {
      "name": "Create Order - Insufficient Scope",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "application/json" }, { "key": "Authorization", "value": "Bearer {{access_token_read}}" } ],
        "body": { "mode": "raw", "raw": "{ \"id\": \"test-3\", \"customer_name\": \"Postman User\", \"total_amount\": 100 }" },
        "url": { "raw": "http://localhost:9000/orders", "protocol": "http", "host": ["localhost"], "port": "9000", "path": ["orders"] }
      }
    }
  ]
}
